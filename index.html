<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>لعبة حجر ورقة مقص — l7n</title>
<style>
  :root{--bg:#0f1724;--card:#0b1220;--accent:#10b981;--muted:#94a3b8;--glass:rgba(255,255,255,0.04)}
  *{box-sizing:border-box;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans",Arial;}
  body{margin:0;min-height:100vh;background:linear-gradient(180deg,#051627 0%, #072033 100%);color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:24px}
  .card{width:100%;max-width:760px;background:linear-gradient(180deg,var(--card),#071026);border-radius:14px;padding:22px;box-shadow:0 10px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
  h1{margin:0 0 8px;font-size:20px}
  p.lead{margin:0 0 18px;color:var(--muted)}
  .board{display:flex;gap:18px;align-items:center;justify-content:space-between;flex-wrap:wrap}
  .col{flex:1;min-width:220px}
  .choices{display:flex;gap:12px;justify-content:center;margin:14px 0}
  button.choice{background:var(--glass);border:1px solid rgba(255,255,255,0.03);padding:12px 16px;border-radius:10px;cursor:pointer;font-weight:600;min-width:88px}
  button.choice:hover{transform:translateY(-4px);transition:transform .14s}
  .play-area{display:flex;flex-direction:column;align-items:center;gap:12px;padding:12px}
  .result{font-size:18px;font-weight:700}
  .score{display:flex;gap:12px;justify-content:center;margin-top:8px}
  .badge{background:rgba(255,255,255,0.03);padding:8px 12px;border-radius:10px;min-width:100px;text-align:center}
  .footer{display:flex;justify-content:space-between;align-items:center;margin-top:14px;gap:10px;flex-wrap:wrap}
  .small{font-size:13px;color:var(--muted)}
  .controls{display:flex;gap:8px}
  button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 10px;border-radius:8px;color:var(--muted);cursor:pointer}
  .hint{font-size:13px;color:var(--muted);text-align:center;margin-top:8px}
  @media (max-width:540px){.board{flex-direction:column}}
</style>
</head>
<body>
  <div class="card" role="application" aria-label="لعبة حجر ورقة مقص">
    <h1>لعبة حجر ورقة مقص — l7n</h1>
    <p class="lead">اختَر: حجر، ورقة، أو مقص — واللعبة ضد الحاسوب. يمكنك إعادة الضبط أو مشاركة النتيجة بعد كل جولة.</p>

    <div class="board">
      <div class="col">
        <div class="play-area" aria-live="polite">
          <div>
            <strong>اختياراتك</strong>
            <div class="choices" id="playerChoices">
              <button class="choice" data-choice="rock">✊ حجر</button>
              <button class="choice" data-choice="paper">🖐 ورقة</button>
              <button class="choice" data-choice="scissors">✌️ مقص</button>
            </div>
          </div>

          <div id="status" class="result" aria-atomic="true">اضغط على خيار للبدء</div>
          <div class="hint">الكمبيوتر يختار عشوائياً. قواعد بسيطة: الحجر يهزم المقص، المقص يهزم الورقة، الورقة تهزم الحجر.</div>
        </div>
      </div>

      <div class="col">
        <div style="text-align:center">
          <strong>نتيجة الجولة</strong>
          <div style="margin:10px 0">
            <div class="badge" id="vs">أنت مقابل الكمبيوتر</div>
            <div class="score" style="margin-top:10px">
              <div class="badge">أنت: <span id="playerScore">0</span></div>
              <div class="badge">تعادل: <span id="drawScore">0</span></div>
              <div class="badge">الكمبيوتر: <span id="compScore">0</span></div>
            </div>
          </div>

          <div style="margin-top:12px">
            <button class="secondary" id="resetBtn" title="إعادة ضبط النتائج">إعادة ضبط</button>
            <button class="secondary" id="shareBtn" title="نسخ النتيجة كنص">نسخ النتيجة</button>
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      <div class="small">مبنية بواسطة l7n — ملف HTML مستقل. افتح `index.html` محليًا أو ارفعه على GitHub Pages.</div>
      <div class="small">Tip: افتح الملف على الهاتف للعب مع أصدقائك!</div>
    </div>
  </div>

<script>
(() => {
  const choices = ['rock','paper','scissors'];
  const labels = {rock:'✊ حجر', paper:'🖐 ورقة', scissors:'✌️ مقص'};
  const buttons = document.querySelectorAll('button.choice');
  const status = document.getElementById('status');
  const playerScoreEl = document.getElementById('playerScore');
  const compScoreEl = document.getElementById('compScore');
  const drawScoreEl = document.getElementById('drawScore');
  const resetBtn = document.getElementById('resetBtn');
  const shareBtn = document.getElementById('shareBtn');

  let playerScore=0, compScore=0, drawScore=0;

  function computerPick(){ return choices[Math.floor(Math.random()*choices.length)]; }

  function decide(p, c){
    if(p===c) return 'draw';
    if((p==='rock' && c==='scissors') || (p==='scissors' && c==='paper') || (p==='paper' && c==='rock')) return 'win';
    return 'lose';
  }

  function updateScores(result){
    if(result==='win'){ playerScore++; playerScoreEl.textContent = playerScore; }
    else if(result==='lose'){ compScore++; compScoreEl.textContent = compScore; }
    else { drawScore++; drawScoreEl.textContent = drawScore; }
  }

  function showStatus(player, comp, result){
    const rText = result==='win' ? 'فزت!' : result==='lose' ? 'خسرت' : 'تعادل';
    status.textContent = `${labels[player]} — مقابل — ${labels[comp]} → ${rText}`;
  }

  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      const player = btn.getAttribute('data-choice');
      const comp = computerPick();
      const result = decide(player, comp);
      updateScores(result);
      showStatus(player, comp, result);
    });
  });

  resetBtn.addEventListener('click', () => {
    playerScore = compScore = drawScore = 0;
    playerScoreEl.textContent = compScoreEl.textContent = drawScoreEl.textContent = '0';
    status.textContent = 'تمت إعادة الضبط. اضغط على خيار للبدء.';
  });

  shareBtn.addEventListener('click', async () => {
    const text = `نتيجة لعبة حجر-ورقة-مقص — أنت ${playerScore} | تعادل ${drawScore} | الكمبيوتر ${compScore}`;
    if(navigator.share){
      try{ await navigator.share({title:'نتيجة اللعبة', text}); }catch(e){}
    } else if(navigator.clipboard){
      navigator.clipboard.writeText(text).then(()=>{ alert('تم نسخ النتيجة للحافظة'); }, ()=>{ alert('فشل النسخ — انسخ يدوياً:\n' + text); });
    } else {
      prompt('انسخ النتيجة يدوياً:', text);
    }
  });

})();
</script>
</body>
</html>
